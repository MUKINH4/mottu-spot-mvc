<div th:fragment="patioCard(patio)" th:object="${patio}"
     class="card shadow-lg bg-white rounded-lg p-4 hover:scale-105 transition cursor-pointer">
    <div class="flex justify-between">
        <div>
            <h3 class="font-bold text-lg text-green-700" th:text="*{nome}"></h3>
            <p class="text-gray-500 mt-2" th:text="*{endereco.logradouro} + ', ' + *{endereco.numero}"></p>
        </div>
        <div>
            <span th:text="*{motos.size()} + '/' + *{lotacao}"></span>
        </div>
    </div>

    <div class="mt-3 flex gap-2">
        <div>
            <a th:href="@{/patios/edit/{id}(id=${id})}" class="btn btn-sm btn-warning">Editar</a>
        </div>
        <div>
            <button id="btn-delete" class="btn btn-sm btn-danger"
               th:onclick="deletarPatio([[${patio.id}]])">Excluir</button>
        </div>
        <div>
            <a th:href="@{/patios/{id}(id=*{id})}">Acessar Pátio</a>
        </div>
    </div>
<script>

    const deletarPatio = async (id) => {
        if (confirm("Excluir este pátio?")) {
            await fetch(`patios/delete/${id}`, {
                method: "DELETE"
            }).then(response => {
                if (response.ok) {
                    window.location.reload()
                }
                }
            ).catch(e => alert("Erro: ", e))
        }
    }

</script>
</div>

